<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.mapperBook">

   <select id="getCount" parameterType="ModelBook" resultType="int">
   select count(*) from book
   where 1 = 1
   <if test="bookname!=null and bookname  !=''"> and bookname = #{bookname}</if>
   <if test="publisher!=null and publisher !=''">and publisher = #{publisher}</if>
   
   
   </select>
   
   <select id="getMaxBookid" resultType="int">
   select max(bookid) from book
   </select>

   <select id="selectEqual" parameterType="ModelBook" resultType="ModelBook">
    select * from book
    where 1=1
    <if test="bookiname != null and bookname !=''">and bookname  = #{bookname}</if>
    <if test="bookid!= null                      ">and bookid = #{bookid}</if>
    <if test="publisher != null and publisher! = ''"> and publisher = #{bookid}</if>
    <if test="price!= null                        ">and bookid = #{bookid}</if>
      
      </select>
      
     <select id="selectAll" parameterType="ModelBook" resultType="ModelBook">
     select * from book
     </select>
      
   <insert id = "insertBook"  parameterType="ModelBook" >
     insert into book  (bookname, publisher, year, price, dtm, use_yn, authid)
                 values( #{bookname}, #{publisher}, #{year}, #{price}, #{dtm}, #{use_yn}, #{authid})
   
   </insert>
    
    <insert id="insertMap" parameterType="java.util.Map">
    INSERT INTO BOOK(BOOKNAME, DTM, AUTHID)
                VALUES(#{b1}, #{d2}, #{a1})
    
    </insert>
    
    <update id="updateBook" parameterType="java.util.Map">
    
    update  book
        set bookname  = #{setbook.bookname}
        set publisher  = #{setbook.publisher}
        set year  = #{setbook.year}
        set price  = #{setbook.price}
        set dtm  = #{setbook.dtm}
        set use_yn  = #{setbook.use_yn}
        set authid  = #{setbook.authid}
        where 1=1
        <if test="wherebook.bookid != null"> and bookid = #{wherbook.bookid} </if>
        <if test="wherebook.bookname != null"> and bookname = #{wherbook.bookname} </if>
        
        
    
    </update>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
</mapper>